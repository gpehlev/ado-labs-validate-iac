name: 'TestSingleWorkflow'

on: [workflow_dispatch, push, pull_request]

jobs:
  PullRequest:
    name: 'PullRequest'
    if: github.ref == 'refs/heads/main' && github.event_name == 'pull_request'
    runs-on: ubuntu-latest

    steps:
      - name: Debug message
        run: echo "This step is triggered by a pull request to main branch"

jobs:
  CodeCommit:
    name: 'CodeCommit'
    if: github.ref != 'refs/heads/main' && github.event_name == 'push'
    runs-on: ubuntu-latest

    steps:
      - name: Debug message
        run: echo "This step is triggered by a push to non-main branch"

jobs:
  Merge:
    name: 'Merge'
    if: github.ref == 'refs/heads/main' && github.event_name == 'push'
    runs-on: ubuntu-latest

    steps:
      - name: Debug message
        run: echo "This step is triggered by a merge to main branch"